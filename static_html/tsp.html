{% extends "layout.html" %}
{% set title = "TSP Example" %}
{% block content %}
<div class="row my-4">
    <div class="col-md-7">
      <a href="#">
        <img class="img-fluid rounded mb-3 mb-md-0" 
             src="{{ url_for('static', filename='images/tsp_map.jpg')}}" alt="">
      </a>
    </div>
    <div class="col-md-5">
      <p>Some short description...</p>
      <a class="btn btn-primary" href="/tsp/description/">
        View More
      </a>
    </div>
  </div>
  <hr>

<!-- Project -->
<div class="row my-4">
  <div class="col-lg-6 mb-4">
    <div class="card h-100">
      <div class="card-header">Input</div>
      <div class="card-body">
        <form>
          <div class="form-group">
            <label for="num_cities">Number of cities:</label>
            <input type="text" class="form-control" id="num_cities" name="num_cities"
              placeholder="integer, valid range [3,99]" required 
              pattern="\b([3-9]|[1-8][0-9]|9[0-9])\b" title="integer, valid range [3,99]">
          </div>
          <input type="submit" value="Submit" class="btn btn-primary">
          <input type="reset" value="Reset" class="btn btn-danger"> 
        </form>
      </div>
    </div>
  </div>
  <div class="col-lg-6 mb-4">
    <div class="card h-100">
      <div class="card-header">Result Summary</div>
      <div class="card-body d-flex flex-column flex-row">
        <table class="table text-center table-sm">
          <thead>
            <th>num_cities</th>
            <th>obj</th>
            <th>runtime (sec)</th>
          </thead>
          <tbody id="tbody">
          </tbody>
        </table>
        <a id="detail" href="/tsp/result/" class="btn btn-primary mt-auto mx-auto">Detail</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
{% block myscript %}
<script>
  function display_summary() {
    var table_row = "";
      if(Storage !== undefined) {
        if (localStorage.tspresult) {
          var res = JSON.parse(localStorage.tspresult);
          table_row += "<tr>"
                    + "<td>" + res.num_cities + "</td>"
                    + "<td>" + res.obj.toFixed(2) + "</td>"
                    + "<td>" + res.runtime.toFixed(3) + "</td>"
                    + "</tr>";
        }
      } else {
        alert("Sorry, your browser does not support local storage...");
      }
    $("tbody").html(table_row);
  }

  display_summary();
</script>
{% endblock %}


